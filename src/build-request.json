{
  "kind": "build_request",
  "title": "Add payment-gated access control with admin management",
  "projectName": "NFL Combine Tracker",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Create a separate admin page at /admin route that displays a list of all users who have attempted to sign in, showing their username/principal and current payment status",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-3",
          "msg-user-4"
        ],
        "quotes": [
          "Seperate page",
          "yes to #3 with those marked \"unpaid\" unable to sign in"
        ]
      },
      "acceptanceCriteria": [
        "Admin page is accessible at /admin route",
        "Page displays all users who have signed in with Internet Identity",
        "Each user entry shows username and current payment status (paid/unpaid)"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add toggle controls on the admin page to mark users as paid or unpaid, with immediate persistence to backend state",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-user-4"
        ],
        "quotes": [
          "yes to #3 with those marked \"unpaid\" unable to sign in"
        ]
      },
      "acceptanceCriteria": [
        "Each user has a toggle switch or checkbox to change payment status",
        "Toggling updates the backend payment status immediately",
        "UI reflects current payment status accurately"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Implement backend payment status storage and validation that tracks which users are marked as paid, defaulting new users to unpaid status",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-4"
        ],
        "quotes": [
          "those marked \"unpaid\" unable to sign in at all"
        ]
      },
      "acceptanceCriteria": [
        "Backend stores payment status (paid/unpaid) for each user principal",
        "New users default to unpaid status",
        "Backend provides methods to query and update payment status"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Block unpaid users from accessing the app after Internet Identity authentication, showing the message: 'Please contact admin for access @thenewbruce1 on IG or iPhone ðŸ“± txt 3527348440'",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-4"
        ],
        "quotes": [
          "yes \"Please contact admin for access @thenewbruce1 on IG or iPhone ðŸ“± txt 3527348440\" message should be seen if they try to log in without having been marked \"paid\"",
          "those marked \"unpaid\" unable to sign in at all and shown above error message"
        ]
      },
      "acceptanceCriteria": [
        "After successful Internet Identity authentication, check user payment status",
        "If user is marked unpaid, display the exact contact message",
        "Unpaid users cannot access any app features beyond the landing page",
        "Paid users proceed normally to the app"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Modify AppShell or authentication flow to enforce payment check on every app load, redirecting unpaid users to the blocked access message",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-4"
        ]
      },
      "acceptanceCriteria": [
        "Payment status is checked when user attempts to access protected routes",
        "Unpaid users see the contact message instead of app content",
        "Payment check happens consistently across all protected routes"
      ]
    }
  ],
  "constraints": [
    "Preserve existing Internet Identity authentication flow",
    "Do not modify frontend/src/hooks/useInternetIdentity.ts",
    "Keep all backend logic in single main.mo actor",
    "Admin page should be protected (only accessible to admin principal)"
  ],
  "nonGoals": [
    "Implementing actual payment processing integration",
    "Creating different subscription tiers or pricing models",
    "Sending automated payment reminder emails or notifications",
    "Building a public-facing payment page for users to self-service"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}